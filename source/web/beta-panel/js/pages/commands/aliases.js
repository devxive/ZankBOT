$(run=function(){socket.getDBValue('alias_command_module','modules','./commands/customCommands.js',function(e){if(!helpers.getModuleStatus('aliasesModule',e.modules)){return}
socket.getDBTableValues('commands_get_aliases','aliases',function(results){let tableData=[];for(let i=0;i<results.length;i++){tableData.push(['!'+results[i].key,'!'+results[i].value,$('<div/>',{'class':'btn-group'}).append($('<button/>',{'type':'button','class':'btn btn-xs btn-danger','style':'float: right','data-alias':results[i].key,'html':$('<i/>',{'class':'fa fa-trash'})})).append($('<button/>',{'type':'button','class':'btn btn-xs btn-warning','style':'float: right','data-alias':results[i].key,'html':$('<i/>',{'class':'fa fa-edit'})})).html()])}
if($.fn.DataTable.isDataTable('#aliasesTable')){$('#aliasesTable').DataTable().destroy();$('#aliasesTable').off()}
let table=$('#aliasesTable').DataTable({'searching':!0,'autoWidth':!1,'lengthChange':!1,'data':tableData,'columnDefs':[{'className':'default-table','orderable':!1,'targets':2},{'width':'45%','targets':0}],'columns':[{'title':'Alias'},{'title':'Command'},{'title':'Actions'}]});table.on('click','.btn-danger',function(){let alias=$(this).data('alias'),row=$(this).parents('tr');socket.removeDBValue('alias_remove','aliases',alias,function(){socket.sendCommand('alias_remove_cmd','reloadcommand '+alias,function(){table.row(row).remove().draw(!1);toastr.success('Successfully removed alias !'+alias)})})});table.on('click','.btn-warning',function(){let alias=$(this).data('alias'),t=$(this);socket.getDBValue('alias_name_get','aliases',alias,function(e){helpers.getModal('edit-alias','Edit Alias','Save',$('<form/>',{'role':'form'}).append(helpers.getInputGroup('alias-name','text','Alias','','!'+alias,'Name of the alias. This cannot be edited.',!0)).append(helpers.getInputGroup('alias-cmd','text','Command','','!'+e.aliases,'Command to be ran by the alias.')),function(){let aliasCmd=$('#alias-cmd');aliasCmd.val(aliasCmd.val().replace(/(\!|\s)/g,'').toLowerCase());switch(!1){case helpers.handleInputString(aliasCmd):break;default:socket.updateDBValue('update_command_alias','aliases',alias,aliasCmd.val(),function(){t.parents('tr').find('td:eq(1)').text('!'+aliasCmd.val());$('#edit-alias').modal('hide');toastr.success('Successfully edited alias !'+alias)})}}).modal('toggle')})})})})});$(function(){$('#aliasesModuleToggle').on('change',function(){socket.sendCommandSync('aliases_commands_module_toggle_cmd','module '+($(this).is(':checked')?'enablesilent':'disablesilent')+' ./commands/customCommands.js',run)});$('#aliascom-button').on('click',function(){helpers.getModal('add-alias','Add Alias','Save',$('<form/>',{'role':'form'}).append(helpers.getInputGroup('alias-name','text','Alias','!cmds','','Name of the alias.')).append(helpers.getInputGroup('alias-cmd','text','Command','!commands','','Command to be ran by the alias.')),function(){let aliasName=$('#alias-name'),aliasCmd=$('#alias-cmd');aliasName.val(aliasName.val().replace(/(\!|\s)/g,'').toLowerCase());aliasCmd.val(aliasCmd.val().replace(/\!/g,'').toLowerCase());switch(!1){case helpers.handleInputString(aliasName):case helpers.handleInputString(aliasCmd):break;default:socket.getDBValue('alias_exists','aliases',aliasName.val(),function(e){if(e.aliases!==null){toastr.error('Failed to add alias as it already exists.');return}
socket.updateDBValue('add_command_alias','aliases',aliasName.val(),aliasCmd.val(),function(){socket.sendCommand('alias_add_cmd','reloadcommand',function(){run();$('#add-alias').modal('hide');toastr.success('Successfully added alias !'+aliasName.val())})})})}}).modal('toggle')});window.location.hash='#'})